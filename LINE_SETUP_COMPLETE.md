# 📱 LINE通知設定完了ガイド

## 🎉 LINE通知システムが正常に設定されました！

あなたのLINE Bot「廃盤サイト通知Bot」が正常に動作しています。

## 📋 設定情報

- **Bot名**: 廃盤サイト通知Bot
- **Bot ID**: U5152b49a3dbf1bd10a15a850db3d439b
- **Channel ID**: 2007999524
- **ステータス**: ✅ アクティブ

## 🚀 ユーザー向けセットアップ手順

### 1. LINE Botを友達追加

1. **LINEアプリを開く**
2. **QRコードをスキャン** または **Bot IDで検索**
3. **「廃盤サイト通知Bot」を友達追加**

### 2. ユーザーIDの取得

ユーザーがBotを友達追加した後、システムが自動的にユーザーIDを取得します。

## 🔧 管理者向け設定

### 環境変数の設定

`.env`ファイルまたは`config.js`に以下の設定が完了しています：

```javascript
// LINE Messaging API
LINE_CHANNEL_ID: '2007999524',
LINE_CHANNEL_ACCESS_TOKEN: 'wC2ad1cBncKnmQ+oQwAZEwkQA/mktCaAccMdFYK1HeYhpKwVohZrfGvEOeS4l1By3sSlo2dpw8EpI4GyXoQpunqB35GfV2Uc86PEXm7/tqnV4woeC29Rl/iMuzaKQHusZ9pPhY/6Xi/zOs+8fFnNjQdB04t89/1O/w1cDnyilFU=',
LINE_CHANNEL_SECRET: '21c0e68ea4b687bcd6f13f60485d69ce',
```

## 📱 通知の種類

### 1. ウェブサイト更新通知
```
🔔 ウェブサイト更新が検出されました！

📊 サイト: [サイト名]
🌐 URL: [URL]
🔄 変更: [変更内容]
🕐 検出時刻: [日時]

監視中のウェブサイトが更新されました。最新情報をご確認ください。

この通知は、ウェブサイト監視システムによって自動的に送信されました。
```

### 2. キーワード検出通知
```
🔔 新しいキーワードが検出されました！

📊 サイト: [サイト名]
🌐 URL: [URL]
🔍 キーワード: [検出されたキーワード]
🕐 検出時刻: [日時]

監視中のキーワードが検出されました。
```

## 🧪 テスト方法

### 1. 設定テスト
```bash
node test-line-config.js
```

### 2. 通知テスト
Chrome拡張機能から「通知テスト」を実行してください。

## 📊 通知設定

### ユーザー設定
- **メール通知**: 有効/無効
- **LINE通知**: 有効/無効
- **通知頻度**: リアルタイム/1時間ごと/1日ごと

### 管理者設定
- **一括通知**: 有効
- **通知履歴**: 保存
- **エラー通知**: 管理者に送信

## 🔒 セキュリティ

### アクセストークンの保護
- ✅ 環境変数で管理
- ✅ ソースコードに直接記載なし
- ✅ 定期的な更新推奨

### ユーザーデータの保護
- ✅ ユーザーIDの暗号化
- ✅ 通知履歴の安全な保存
- ✅ プライバシー保護

## 🚨 トラブルシューティング

### よくある問題

#### 1. 通知が届かない
- **原因**: ユーザーがBotを友達追加していない
- **解決**: Botを友達追加してください

#### 2. エラー: Invalid user ID
- **原因**: ユーザーIDが無効
- **解決**: ユーザーにBotを友達追加してもらう

#### 3. エラー: Channel access token invalid
- **原因**: アクセストークンの期限切れ
- **解決**: LINE Developers Consoleで新しいトークンを生成

### ログの確認
```bash
# 通知ログの確認
node check-notification-logs.js

# システムログの確認
tail -f scraper.log
```

## 📈 パフォーマンス

### 通知制限
- **メッセージ送信**: 500件/月（無料プラン）
- **API呼び出し**: 制限あり
- **同時送信**: 最大100件

### 最適化
- **バッチ送信**: 複数ユーザーへの一括送信
- **エラー処理**: 失敗時の再試行
- **ログ記録**: 送信履歴の保存

## 🎯 次のステップ

### 1. ユーザー登録
- ユーザーにBotを友達追加してもらう
- システムでユーザーIDを登録

### 2. 通知設定
- ユーザーが通知設定を有効化
- 監視したいサイトを追加

### 3. 監視開始
- システムが自動的にサイトを監視
- 変更検出時にLINE通知を送信

## 📞 サポート

### 技術サポート
- **ログファイル**: `scraper.log`
- **設定ファイル**: `config.js`
- **テストスクリプト**: `test-line-config.js`

### ユーザーサポート
- **Bot名**: 廃盤サイト通知Bot
- **QRコード**: LINE Developers Consoleで取得
- **マニュアル**: このガイドを参照

---

## 🎉 設定完了！

あなたのLINE通知システムは正常に動作しています。ユーザーがBotを友達追加すれば、すぐに通知を受け取ることができます。

**Bot名**: 廃盤サイト通知Bot  
**ステータス**: ✅ アクティブ  
**通知言語**: 🇯🇵 日本語  

素晴らしい監視システムをお楽しみください！ 🚀
